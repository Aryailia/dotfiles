# Reload on startup and default reloads every 60 minutes
#auto-reload yes
#reload-time 60

history-limit 0

# For some reason urlscan -r kills ${BROWSER} variable
#external-url-viewer "urlscan -cd -r 'handle.sh -l -t \"{}\"'"

# Need cat otherwise python throws a pipe error
#external-url-viewer "urlscan -cdn | cat - | handle.sh -l -t"
external-url-viewer "uriscan.sh -lms - | handle.sh -t -l"

# Cannot have multiple keys for the same keybind
# Can only have Ctrl + capital letter
# pageup and pagedown bindings seem to interfere with macros
bind-key Y pb-download
bind-key U show-urls
bind-key ^U pageup
bind-key x delete-article
bind-key ^D pagedown
bind-key G end
bind-key g home
bind-key l open
bind-key J next-feed articlelist
bind-key K prev-feed articlelist
bind-key j down
bind-key k up
bind-key q quit
bind-key n next-unread
bind-key m toggle-article-read
bind-key N prev-unread
unbind-key v


color listnormal cyan black
color listfocus blue white standout bold
color listnormal_unread white black
color listfocus_unread white blue bold
color info white magenta bold
# color article white default

# Must use prefix macros with single quote to use
# External-url-viewer pipes the entire screen to the command 
# Browser feeds the one link as a command line argument
browser "handle.sh -l -t"
macro n next-feed article-list ; next-unread
macro p prev-feed article-list ; prev-unread
macro v set browser "queue.sh youtube-dl --video"; open-in-browser ; set browser "handle.sh -l -t"
macro a set browser "queue.sh youtube-dl --audio"; open-in-browser ; set browser "handle.sh -l -t"
macro s set browser "queue.sh youtube-dl --video --subtitles"; open-in-browser ; set browser "handle.sh -l -t"

macro c set browser "clipboard.sh --write '%u'"; open-in-browser ; set browser "handle.sh -l -t"
macro o set browser "handle.sh -l -g"; open-in-browser ; set browser "handle.sh -l -t"
macro e set external-url-viewer "${EDITOR}"; show-urls ; set external-url-viewer "uriscan.sh -lms - | handle.sh -l -t"

macro E set browser "printf %s '%u'; ${EDITOR} ~/.config/newsboat/config"; open-in-browser ; set browser "handle.sh -l -t"

macro U set external-url-viewer "uriscan.sh -lms - | handle.sh -l -g"; show-urls ; set external-url-viewer "uriscan.sh -lms - | handle.sh -l -t"
macro d set external-url-viewer "uriscan.sh -lms - | handle.sh -l -d"; show-urls ; set external-url-viewer "uriscan.sh -lms - | handle.sh -l -t"
